{% extends 'base.html' %}

{% block body %}
    <div class="messagePage">
        <div>
            {% set seen_senders = {} %}
            {% for message in message %}
                {% if message.sender_id != current_user.id and message.sender_id not in seen_senders %}
                    {% set _ = seen_senders.update({message.sender_id: true}) %}
                    <div class="messagePage-messages">
                        {% set user = get_user(message.sender_id) %}
                        <img src="{{ url_for('static', filename='profile_pictures/' + user.foto_perfil ) }}"
                             alt="User Image"
                             class="poemImage"
                             style="border-radius: 50%; width: 80px; height: 80px; margin-right: 15px" />
                        <div class="messagePage-info">
                            <strong>{{ user.username }}</strong>
                            {% if message.message|length > 82 %}
                                {{ message.message[:82] + '...' }}
                            {% else %}
                                <p>{{ message.message }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}